- set_meta_tags title: raw(@article.title)
- set_meta_tags description: raw(@article.excerpt)
- set_meta_tags canonical: "https://www.dublininquirer.com#{ @article.path }"
- set_meta_tags 'article:publisher': 'https://www.facebook.com/dublininquirer/'
- set_meta_tags 'article:author': "https://www.dublininquirer.com/contributors/#{ @article.author.try(:slug) }"
- set_meta_tags author: "https://www.dublininquirer.com/contributors/#{ @article.author.try(:slug) }"

- set_meta_tags og: {type: 'article', url: "https://www.dublininquirer.com#{ @article.path }", description: raw(@article.excerpt), title: raw(@article.title)}

- if @article.featured_artwork.present?
  - set_meta_tags image_src: @article.featured_artwork.image.large.url
  - set_meta_tags og: {image: @article.featured_artwork.image.large.url.gsub('https:','http:'), 'image:url': @article.featured_artwork.image.large.url, 'image:secure_url': @article.featured_artwork.image.large.url}
  - set_meta_tags twitter: {image: {'_': @article.featured_artwork.image.large.url}}

  - if @article.featured_artwork.width_px.present? && @article.featured_artwork.height_px.present?
    - set_meta_tags 'og:image:width': @article.featured_artwork.large_width_px
    - set_meta_tags 'og:image:height': @article.featured_artwork.large_height_px
    - set_meta_tags 'og:image:type': @article.featured_artwork.file_type


.block.-px2.-pb2= render partial: "articles/templates/#{ @template }", locals: { article: @article, limited: @limited }

.block.-px2
  .block.-py4
    - if @article.commentable?
      .wrapper.-small{role: 'layout'}= render partial: 'comments/comments', locals: { article: @article }

  - if @article.tags.any?
    .block.-bt.-pt1.-my2
      .row
        .col-xs-12.col-md-4
          %header
            %h3 Filed under:

          .block
            .p.-b2
              %ul.list.-sentence
                - @article.displayable_tags.each do |tag|
                  %li= link_to tag.name, tag_path(id: tag.slug)

        .col-xs-12.col-md-4
          %header
            %h3 #{ @article.authors.many? ? 'Authors' : 'Author' }:

          .block
            .p.-b2
              - @article.authors.each do |author|
                :markdown
                  _#{ link_to author.full_name, author }:_ #{ author.bio }

  - if @article.from_the_same_issue.by_position.any?
    .block.-mt4.-pt4.-mb2
      %header.text.-centered
        %h3.h.-h3 Also in the #{ @article.issue_date.strftime('%-d %B %Y') } issue

      .row
        - @article.from_the_same_issue.by_position.first(6).each do |article|
          .col-xs-12.col-md-4.col-lg-2.col.flex
            = render partial: 'articles/excerpts/tiny', locals: { article: article }

- if permission_for_cookie? and @article.paywalled? # yes cookie, and yes paywalled
  = render partial: 'user_sessions/paywall'

= render partial: 'products/enticement'

- if @limited
  = render partial: 'user_sessions/limited'